# Spec: ロジックの実装

## 概要

このトラックでは、Electronメモアプリケーションの主要なロジックを実装します。具体的には、ファイルの読み込み、新規作成と保存、既存ファイルの保存といった基本的なファイル操作機能に焦点を当てます。データフローはReactのStateで管理し、エラー発生時にはユーザーに明確なUIフィードバックを提供することで、データの整合性とユーザー体験の向上を最優先します。

## ゴール

- ユーザーが既存のテキストファイルを読み込み、表示できるようにする。
- ユーザーが新規ファイルを編集し、指定した場所に保存できるようにする。
- ユーザーが既存のファイルを編集し、上書き保存できるようにする。
- ファイル操作におけるエラーに対して、ユーザーに適切なフィードバックを提供する。

## 機能要件

### 1. ファイル読み込み機能

- アプリケーションのUI（例: メニューの「開く」ボタン）からファイル選択ダイアログを起動できること。
- 選択されたテキストファイルの内容を読み込み、エディタ領域に表示できること。
- サポートされていないファイル形式（例: 画像ファイル）が選択された場合、エラーメッセージを表示すること。

### 2. 新規ファイル作成・保存機能

- アプリケーションのUI（例: メニューの「新規」ボタン）から新しい空のメモを開始できること。
- 編集中の新規メモを、ファイルシステム上の任意の場所に保存できること（「名前を付けて保存」機能）。

### 3. 既存ファイルの上書き保存機能

- 読み込まれた既存ファイルを編集した後、元のファイルパスに上書き保存できること（「保存」機能）。
- 未保存の変更がある状態でアプリケーションを閉じようとした場合、保存を促すダイアログを表示すること。

### 4. エラーハンドリングとUIフィードバック

- ファイルの読み込みや保存に失敗した場合（例: 権限エラー、ディスク容量不足）、その旨をUI（例: ステータスバー、通知）でユーザーに通知すること。
- エラー発生時にもアプリケーションがクラッシュせず、安定して動作すること。

## 非機能要件

- **データの整合性:** ファイルの内容が正確に読み書きされ、データが破損しないこと。
- **応答性:** ファイル操作は非同期で行い、UIがフリーズしないこと。
- **セキュリティ:** ファイルパスのバリデーションなど、基本的なセキュリティ対策を講じること。

## 受け入れ基準

- 「開く」メニューから`*.txt`ファイルを選択し、内容がエディタに正確に表示されること。
- 「新規」メニューで新しいメモを作成し、テキストを入力後、「保存」メニューから任意の場所に`*.txt`ファイルとして保存できること。
- 既存の`*.txt`ファイルを開き、内容を編集後、「保存」メニューから上書き保存できること。
- 読み込みや保存に失敗するシナリオ（例: 存在しないパスへの保存試行）で、UIに適切なエラーメッセージが表示されること。
- 未保存の変更がある状態でアプリケーションを終了しようとすると、保存確認のダイアログが表示されること。

## スコープ外

- 高度なテキスト装飾（太字、斜体など）。
- 複数タブ/ウィンドウでのメモ管理。
- クラウドストレージ連携。
- コンポーネント化（UI実装トラックで同様にスコープ外とされているため）。
