@page "/"
@using DotNetGrpc.Shared
@using Grpc.Net.Client
@inject Greeter.GreeterClient GreeterClient

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<p>
    <label>
        Name: <input @bind="name" />
    </label>
    <button @onclick="SayHello">Say Hello</button>
</p>

<p>@message</p>

@code {
    private string name = "World";
    private string message = "";

    private async Task SayHello()
    {
        try
        {
            var request = new HelloRequest { Name = name };
            var reply = await GreeterClient.SayHelloAsync(request);
            message = reply.Message;
        }
        catch (Exception ex)
        {
            message = $"Error: {ex.Message}";
        }
    }
}
